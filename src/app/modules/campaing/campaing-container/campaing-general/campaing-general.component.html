<app-navbar></app-navbar>
<div class="sm:ml-64 px-6" [ngClass]="{'userPointOfSale': hasUserPointOfSale()}">
    <ng-container *ngIf="hasUserPointOfSale()">
        <div class="general-data">
            <form [formGroup]="campaingForm">
                <mat-card>
                    <mat-stepper orientation="horizontal">
                        <mat-step>
                            <ng-template matStepLabel>Escoge tu negocio</ng-template>
                            <ng-template matStepContent>
                                <div fxLayout="row" fxLayoutGap="20px" class="mt-6">
                                    <div
                                        class="w-full p-4 bg-white border border-gray-200 rounded-lg shadow sm:p-6 dark:bg-gray-800 dark:border-gray-700">
                                        <h5
                                            class="mb-3 text-base font-semibold text-gray-900 md:text-xl dark:text-white">
                                            Negocios
                                        </h5>
                                        <p class="text-sm font-normal text-gray-500 dark:text-gray-400">Escoge el negocio
                                            de
                                            tu preferencia!</p>
                                        <ul class="my-4 space-y-3">
                                            <ng-container *ngFor="let pointOfSale of pointOfSaleArray">
                                                <li>
                                                    <button (click)="setMainPos(pointOfSale)"
                                                        matStepperNext type="button"
                                                        class="flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white w-full">
                                                        <div class="channels">
                                                            <svg aria-hidden="true" class="h-4" viewBox="0 0 40 38"
                                                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <path
                                                                    d="M19.5 3C10.6 3 3 10.6 3 19.5C3 28.4 10.6 36 19.5 36C28.4 36 36 28.4 36 19.5C36 10.6 28.4 3 19.5 3ZM26.5 28.5L24 26C23 25 21 26.5 18 23.5C15 20.5 16.5 18.5 15.5 17L13 14.5C11.6 12.9 13 11.3 14.5 12.8C15.5 13.8 17 15.3 18 17C18.5 18 19.5 17.5 20 17L22.5 20C23 20.5 22.5 21.5 21.5 22C21 22.5 20 21.5 19.5 21C18.5 20 18 19.5 17.5 19C17 18.5 16 18.5 15 18.5C14.5 18.5 13 19.5 13 20.5C13 21.5 13.5 22 14 22.5L15.5 24C16 24.5 17.5 23.5 19 22C20.5 20.5 21.5 19.5 23 18C24.5 16.5 25.5 15 27 13.5C28.5 12 29 10 30.5 10C32 10 33 11.5 33 12.5C33 14 31 15.5 30 17C29 18.5 28.5 20.5 27.5 21.5C27 22 26.5 22 26 22C25.5 22 25 21.5 24.5 21L23 20.5C22 20 21.5 21 21.5 22C21.5 23.5 22.5 25 24.5 26C26 26.5 27 26 27.5 25.5C28 24.5 27.5 23.5 27 22C26 21 26 21 26.5 20C27 19.5 27.5 19 28 19C28.5 18.5 28.5 19 28.5 19.5C28.5 20.5 27.5 21.5 26.5 22C25.5 22.5 24.5 22 24 22L23 21.5C22 21 21.5 21.5 21.5 22.5C21.5 23.5 22.5 25 24.5 26.5C26 27.5 27.5 27.5 28 27.5C29.5 27.5 30 27.5 31.5 28C32.5 28.5 34 28 34 27C34 26.5 33.5 26 33 26.5C32.5 27 31.5 28 30 28C28.5 28 27 28 26.5 28.5Z"
                                                                    fill="#25D366" />
                                                            </svg>
                                                            <span class="flex-1 ms-3 whitespace-nowrap">{{pointOfSale.name}}</span>
                                                        </div>
                                                        <svg aria-hidden="true" class="h-5 ml-auto" viewBox="0 0 24 24"
                                                            fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M4 12L20 12M12 4L20 12L12 20" stroke="currentColor"
                                                                stroke-width="2" stroke-linecap="round"
                                                                stroke-linejoin="round" />
                                                        </svg>
                                                    </button>
                                                </li>
                                            </ng-container>
                                        </ul>
                                    </div>

                                </div>
                            </ng-template>
                        </mat-step>
                        <mat-step>
                            <ng-template matStepLabel>Escoge canal</ng-template>
                            <ng-template matStepContent>
                                <div fxLayout="row" fxLayoutGap="20px" class="mt-6">
                                    <div
                                        class="w-full p-4 bg-white border border-gray-200 rounded-lg shadow sm:p-6 dark:bg-gray-800 dark:border-gray-700">
                                        <h5
                                            class="mb-3 text-base font-semibold text-gray-900 md:text-xl dark:text-white">
                                            Canal de contacto
                                        </h5>
                                        <p class="text-sm font-normal text-gray-500 dark:text-gray-400">Escoge el canal
                                            de
                                            tu preferencia!</p>
                                        <ul class="my-4 space-y-3">
                                            <!--li>
                                                <button (click)="setMainChannel(EnumCampaignChannel.WhatsApp)"
                                                    matStepperNext type="button"
                                                    class="flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white w-full">
                                                    <div class="channels">
                                                        <svg aria-hidden="true" class="h-4" viewBox="0 0 40 38"
                                                            fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M19.5 3C10.6 3 3 10.6 3 19.5C3 28.4 10.6 36 19.5 36C28.4 36 36 28.4 36 19.5C36 10.6 28.4 3 19.5 3ZM26.5 28.5L24 26C23 25 21 26.5 18 23.5C15 20.5 16.5 18.5 15.5 17L13 14.5C11.6 12.9 13 11.3 14.5 12.8C15.5 13.8 17 15.3 18 17C18.5 18 19.5 17.5 20 17L22.5 20C23 20.5 22.5 21.5 21.5 22C21 22.5 20 21.5 19.5 21C18.5 20 18 19.5 17.5 19C17 18.5 16 18.5 15 18.5C14.5 18.5 13 19.5 13 20.5C13 21.5 13.5 22 14 22.5L15.5 24C16 24.5 17.5 23.5 19 22C20.5 20.5 21.5 19.5 23 18C24.5 16.5 25.5 15 27 13.5C28.5 12 29 10 30.5 10C32 10 33 11.5 33 12.5C33 14 31 15.5 30 17C29 18.5 28.5 20.5 27.5 21.5C27 22 26.5 22 26 22C25.5 22 25 21.5 24.5 21L23 20.5C22 20 21.5 21 21.5 22C21.5 23.5 22.5 25 24.5 26C26 26.5 27 26 27.5 25.5C28 24.5 27.5 23.5 27 22C26 21 26 21 26.5 20C27 19.5 27.5 19 28 19C28.5 18.5 28.5 19 28.5 19.5C28.5 20.5 27.5 21.5 26.5 22C25.5 22.5 24.5 22 24 22L23 21.5C22 21 21.5 21.5 21.5 22.5C21.5 23.5 22.5 25 24.5 26.5C26 27.5 27.5 27.5 28 27.5C29.5 27.5 30 27.5 31.5 28C32.5 28.5 34 28 34 27C34 26.5 33.5 26 33 26.5C32.5 27 31.5 28 30 28C28.5 28 27 28 26.5 28.5Z"
                                                                fill="#25D366" />
                                                        </svg>
                                                        <span class="flex-1 ms-3 whitespace-nowrap">WhatsApp</span>
                                                    </div>
                                                    <span
                                                        class="inline-flex items-center justify-center px-2 py-0.5 ms-3 text-xs font-medium text-gray-500 bg-gray-200 rounded dark:bg-gray-700 dark:text-gray-400 mx-4">Default</span>
                                                    <svg aria-hidden="true" class="h-5 ml-auto" viewBox="0 0 24 24"
                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M4 12L20 12M12 4L20 12L12 20" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                </button>
                                            </li>
                                            <li>
                                                <button matStepperNext type="button" (click)="setMainChannel(EnumCampaignChannel.SMS)"
                                                    class="flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white w-full">
                                                    <div class="channels">
                                                        <svg aria-hidden="true" class="h-5" viewBox="0 0 24 24"
                                                            fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M20 2H4C2.89 2 2.01 2.89 2.01 4L2 20C2 21.1 2.89 22 4 22H20C21.1 22 22 21.1 22 20V4C22 2.89 21.1 2 20 2ZM20 20H4V4H20V20ZM6 18H18V16H6V18ZM6 14H18V12H6V14ZM6 10H18V8H6V10Z"
                                                                fill="#007AFF" />
                                                        </svg>
                                                        <span class="flex-1 ms-3 whitespace-nowrap">SMS</span>
                                                    </div>
                                                    <svg aria-hidden="true" class="h-5 ml-auto" viewBox="0 0 24 24"
                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M4 12L20 12M12 4L20 12L12 20" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                </button>
                                            </li>
                                            <li>
                                                <button matStepperNext type="button" (click)="setMainChannel(EnumCampaignChannel.Email)"
                                                    class="flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white w-full">
                                                    <div class="channels">
                                                        <svg aria-hidden="true" class="h-5" viewBox="0 0 24 24"
                                                            fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M12 12.713L1 7.356V17.143C1 18.212 1.87 19.081 2.939 19.081H21.061C22.13 19.081 23 18.212 23 17.143V7.356L12 12.713ZM22.999 6.168L12 11.719 1 6.168C1 5.099 1.87 4.231 2.939 4.231H21.061C22.13 4.231 23 5.099 23 6.168Z"
                                                                fill="#1E90FF" />
                                                        </svg>
                                                        <span class="flex-1 ms-3 whitespace-nowrap">Email</span>
                                                    </div>
                                                    <svg aria-hidden="true" class="h-5 ml-auto" viewBox="0 0 24 24"
                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M4 12L20 12M12 4L20 12L12 20" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                </button>
                                            </li-->
                                            <li>
                                                <button matStepperNext type="button" (click)="setMainChannel(EnumCampaignChannel.Push)"
                                                    class="flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white w-full">
                                                    <div class="channels">
                                                        <svg aria-hidden="true" class="h-5" viewBox="0 0 24 24"
                                                            fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H10L14 23L18 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 18H17.17L15.58 19.59C15.21 19.95 14.7 20 14.3 19.71L10.5 16.97H4V6H20V18Z"
                                                                fill="#FF6347" />
                                                        </svg>
                                                        <span class="flex-1 ms-3 whitespace-nowrap">Push</span>
                                                    </div>
                                                    <svg aria-hidden="true" class="h-5 ml-auto" viewBox="0 0 24 24"
                                                        fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M4 12L20 12M12 4L20 12L12 20" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" />
                                                    </svg>
                                                </button>
                                            </li>
                                        </ul>
                                        <div>
                                            <a href="#"
                                                class="inline-flex items-center text-xs font-normal text-gray-500 hover:underline dark:text-gray-400">
                                                <svg class="w-3 h-3 me-2" aria-hidden="true"
                                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                                    <path stroke="currentColor" stroke-linecap="round"
                                                        stroke-linejoin="round" stroke-width="2"
                                                        d="M7.529 7.988a2.502 2.502 0 0 1 5 .191A2.441 2.441 0 0 1 10 10.582V12m-.01 3.008H10M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                                </svg>
                                                Actualiza tu plan para acceder a más opciones!</a>
                                        </div>
                                    </div>

                                </div>
                            </ng-template>
                        </mat-step>
                        <mat-step>
                            <ng-template matStepLabel>Información de campaña</ng-template>
                            <ng-template matStepContent>
                                <div fxLayout="row" class="px-4 mt-4">
                                    <div fxFlex="100%" fxLayout="row" fxLayoutGap="20px" style="margin-top: 20px;">
                                        <div fxFlex="grow">
                                            <label
                                                [ngClass]="!isTouchedOrDirtyField('name') ? '' : isFieldValid('name') ? lableInvalidClassValue : lableValidClassValue"
                                                class="block mb-2 text-sm font-medium">
                                                Nombre de campaña</label>
                                            <input type="text"
                                                [ngClass]="!isTouchedOrDirtyField('name') ? '' : isFieldValid('name') ? inputInvalidClassValue : inputValidClassValue"
                                                class="border text-sm rounded-lg block w-full p-2.5"
                                                placeholder="Ex. Dia de la madre" formControlName="name"
                                                (input)="markFieldAsTouchedOrDirty('name')">
                                            <ng-container *ngIf="isTouchedOrDirtyField('name')">
                                                <ng-container *ngIf="isFieldValid('name')">
                                                    <p class="{{paragraphInvalidClassValue}}"><span
                                                            class="font-medium">Opss!</span>
                                                        Nombre invalido!</p>
                                                </ng-container>
                                                <ng-container *ngIf="!isFieldValid('name')">
                                                    <p class="{{paragraphValidClassValue}}"><span
                                                            class="font-medium">Todo
                                                            bien!</span>
                                                        Nombre valido!</p>
                                                </ng-container>
                                            </ng-container>
                                        </div>
                                        <div fxFlex="grow">
                                            <div fxLayout="row" fxLayoutGap="20px">
                                                <div fxFlex="grow">
                                                    <label for="start-date" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                                        Inicio de campaña
                                                    </label>
                                                    <div class="relative">
                                                        <div class="absolute inset-y-0 end-0 top-0 flex items-center pe-3.5 pointer-events-none">
                                                            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                                                fill="currentColor" viewBox="0 0 24 24">
                                                                <path fill-rule="evenodd"
                                                                    d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v4a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414L13 11.586V8Z"
                                                                    clip-rule="evenodd" />
                                                            </svg>
                                                        </div>
                                                        <input type="date" id="start-date"
                                                            class="bg-gray-50 border leading-none border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                                                            formControlName="startDate" />
                                                    </div>
                                                </div>
                                                <div fxFlex="grow">
                                                    <label for="end-date" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                                                        Fin de campaña
                                                    </label>
                                                    <div class="relative">
                                                        <div class="absolute inset-y-0 end-0 top-0 flex items-center pe-3.5 pointer-events-none">
                                                            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                                                fill="currentColor" viewBox="0 0 24 24">
                                                                <path fill-rule="evenodd"
                                                                    d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v4a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414L13 11.586V8Z"
                                                                    clip-rule="evenodd" />
                                                            </svg>
                                                        </div>
                                                        <input type="date" id="end-date"
                                                            class="bg-gray-50 border leading-none border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                                                            formControlName="endDate" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>                                        
                                    </div>
                                </div>
                                <div fxLayout="row" class="px-4">
                                    <div fxFlex="100%" fxLayout="row" fxLayoutGap="20px" style="margin-top: 20px;">
                                        <div fxFlex="grow">
                                            <label
                                                [ngClass]="!isTouchedOrDirtyField('additionalData') ? '' : isFieldValid('additionalData') ? lableInvalidClassValue : lableValidClassValue"
                                                class="block mb-2 text-sm font-medium">
                                                Titulo de mensaje</label>
                                            <input type="text"
                                                [ngClass]="!isTouchedOrDirtyField('additionalData') ? '' : isFieldValid('additionalData') ? inputInvalidClassValue : inputValidClassValue"
                                                class="border text-sm rounded-lg block w-full p-2.5"
                                                placeholder="Ex. 2655100331" formControlName="additionalData"
                                                (input)="markFieldAsTouchedOrDirty('additionalData')">
                                            <ng-container *ngIf="isTouchedOrDirtyField('additionalData')">
                                                <ng-container *ngIf="isFieldValid('additionalData')">
                                                    <p class="{{paragraphInvalidClassValue}}"><span
                                                            class="font-medium">Opss!</span>
                                                        Titulo invalido!</p>
                                                </ng-container>
                                                <ng-container *ngIf="!isFieldValid('additionalData')">
                                                    <p class="{{paragraphValidClassValue}}"><span
                                                            class="font-medium">Todo
                                                            bien!</span>
                                                            Titulo valido!</p>
                                                </ng-container>
                                            </ng-container>
                                        </div>

                                    </div>
                                </div>
                                <div fxLayout="row" class="px-4">
                                    <div fxFlex="100%" fxLayout="row" fxLayoutGap="20px" style="margin-top: 20px;">
                                        <div fxFlex="grow">
                                            <label
                                                [ngClass]="!isTouchedOrDirtyField('additionalData2') ? '' : isFieldValid('additionalData2') ? lableInvalidClassValue : lableValidClassValue"
                                                class="block mb-2 text-sm font-medium">
                                                Cuerpo de mensaje</label>
                                            <input type="text"
                                                [ngClass]="!isTouchedOrDirtyField('additionalData2') ? '' : isFieldValid('additionalData2') ? inputInvalidClassValue : inputValidClassValue"
                                                class="border text-sm rounded-lg block w-full p-2.5"
                                                placeholder="Ex. 3202114421" formControlName="additionalData2"
                                                (input)="markFieldAsTouchedOrDirty('additionalData2')">
                                            <ng-container *ngIf="isTouchedOrDirtyField('additionalData2')">
                                                <ng-container *ngIf="isFieldValid('additionalData2')">
                                                    <p class="{{paragraphInvalidClassValue}}"><span
                                                            class="font-medium">Opss!</span>
                                                            Cuerpo invalido!</p>
                                                </ng-container>
                                                <ng-container *ngIf="!isFieldValid('additionalData2')">
                                                    <p class="{{paragraphValidClassValue}}"><span
                                                            class="font-medium">Todo
                                                            bien!</span>
                                                            Cuerpo valido!</p>
                                                </ng-container>
                                            </ng-container>
                                        </div>

                                    </div>
                                </div>
                                <div fxLayout="row" class="px-4 mt-6">
                                    <div fxFlex="grow">
                                        <label
                                            [ngClass]="!isTouchedOrDirtyField('description') ? '' : isFieldValid('description') ? lableInvalidClassValue : lableValidClassValue"
                                            class="block mb-2 text-sm font-medium">
                                            Descripción</label>
                                        <input type="text" #descriptionInput
                                            [ngClass]="!isTouchedOrDirtyField('description') ? '' : isFieldValid('description') ? inputInvalidClassValue : inputValidClassValue"
                                            class="border text-sm rounded-lg block w-full p-4"
                                            placeholder="Ex. Lorem ipsum" formControlName="description"
                                            (input)="markFieldAsTouchedOrDirty('description')">
                                        <ng-container *ngIf="isTouchedOrDirtyField('description')">
                                            <ng-container *ngIf="isFieldValid('description')">
                                                <p class="{{paragraphInvalidClassValue}}"><span
                                                        class="font-medium">Opss!</span>
                                                    Descripción invalida!<br>
                                                    {{descriptionInput.value.length}}/20</p>

                                            </ng-container>
                                            <ng-container *ngIf="!isFieldValid('description')">
                                                <p class="{{paragraphValidClassValue}}"><span class="font-medium">Todo
                                                        bien!</span>
                                                    Descripción valida!</p>
                                            </ng-container>
                                        </ng-container>
                                    </div>
                                </div>
                                <div class="p-4">
                                    <button type="button" (click)="onSubmit()"
                                        class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                                        Crear campaña
                                        <svg class="rtl:rotate-180 w-3.5 h-3.5 ms-2" aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9" />
                                        </svg>
                                    </button>
                                </div>
                            </ng-template>
                        </mat-step>
                    </mat-stepper>
                </mat-card>
            </form>
        </div>
    </ng-container>
    <ng-container *ngIf="!hasUserPointOfSale()">
        <div class="flex flex-col items-center justify-center h-screen">
            <img src="assets/img/resourceNotFound.png" alt="Imagen descriptiva" class="mb-4 w-64 h-64 object-contain">
            <p class="text-lg font-semibold text-gray-700">Sin puntos de venta asociados</p>
        </div>
    </ng-container>
</div>